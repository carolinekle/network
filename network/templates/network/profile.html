{% extends "network/layout.html" %}
{% block body %}


    <h2 class="mx-3">{{ profile.username }}</h2>

    <br>
    <div class="d-flex justify-content-around ">
        <h4>Following: {{ following.count }}</h4>
        <h4>Followers:  {{ followers.count }}</h4>
    </div>
    {%if post.poster == user %}

    {%else%}
    <button type="submit"class=" ml-3 btn btn-primary" id="follow" value={{ post.poster }}>Follow</button>
    {% endif %}
    <br>

    {% for post in page_obj %}
    <div class="mx-3 my-3 d-flex flex-column post">
        <a href="{% url 'profile' post.poster %}"><h4>{{ post.poster }}</h4></a>
        <p id ="content_{{ post.id }}">{{ post.text }}</p>
        <small>{{ post.created }}</small>
        {% if post.edited %}
        <small id="edited_date_{{ post.id }}">Updated on: {{ post.edited }}</small>
        {% endif %}
        {% if post.poster == user %}
        <div class="flex-row">
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#edited_{{ post.id }}">Edit</button>
            <button type="button" class="btn btn-primary">Delete Post</button>
            
        </div>
        


        <div class="modal fade" id="edited_{{ post.id }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle"> {{ post.poster }}</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <textarea rows="5" class="modal-body" id="new_text">{{ post.text }}</textarea>
                <div class="modal-footer">
                  
                  <button type="submit" value= {{ post.id }} id="edit" class="btn btn-primary">Save Changes</button>
                </div>
              </div>
            </div>
        </div>

        {% endif %}

        {%if user.is_authenticated %}
        <div class = "mt-1"> <button type="submit" value={{post.id}} id="like" class="btn btn-danger mr-2 like_{{ post.id }}">Like</button><span value = {{post.likes}} class = "like_count_{{post.id}}">{{ post.likes }} </span></div>
        {%endif%}
        <div>
        </div>
    </div>

 {% endfor %}


    <div class="pagination d-flex justify-content-center my-2">
        <span class="step-links">
            {% if page_obj.has_previous %}
                <a href="?page=1">&laquo; First</a>
                <a href="?page={{ page_obj.previous_page_number }}">Previous</a>
            {% endif %}
    
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">Next</a>
                <a href="?page={{ page_obj.paginator.num_pages }}">Last &raquo;</a>
        {% endif %}
        </span>
    </div>


{% endblock %}